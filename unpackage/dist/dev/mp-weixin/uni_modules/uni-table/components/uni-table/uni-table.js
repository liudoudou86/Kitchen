"use strict";var c=require("../../../../common/vendor.js");const o={name:"uniTable",options:{virtualHost:!0},emits:["selection-change"],props:{data:{type:Array,default(){return[]}},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},type:{type:String,default:""},emptyText:{type:String,default:"\u6CA1\u6709\u66F4\u591A\u6570\u636E"},loading:{type:Boolean,default:!1},rowKey:{type:String,default:""}},data(){return{noData:!0,minWidth:0,multiTableHeads:[]}},watch:{loading(t){},data(t){this.theadChildren,this.theadChildren&&this.theadChildren.rowspan,this.noData=!1}},created(){this.trChildren=[],this.thChildren=[],this.theadChildren=null,this.backData=[],this.backIndexData=[]},methods:{isNodata(){this.theadChildren;let t=1;this.theadChildren&&(t=this.theadChildren.rowspan),this.noData=this.trChildren.length-t<=0},selectionAll(){let t=1,a=this.theadChildren;this.theadChildren?t=a.rowspan-1:a=this.trChildren[0];let e=this.data&&this.data.length.length>0;a.checked=!0,a.indeterminate=!1,this.trChildren.forEach((h,i)=>{if(!h.disabled){if(h.checked=!0,e&&h.keyValue){const n=this.data.find(l=>l[this.rowKey]===h.keyValue);this.backData.find(l=>l[this.rowKey]===n[this.rowKey])||this.backData.push(n)}i>t-1&&this.backIndexData.indexOf(i-t)===-1&&this.backIndexData.push(i-t)}}),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},toggleRowSelection(t,a){t=[].concat(t),this.trChildren.forEach((e,h)=>{const i=t.findIndex(l=>typeof l=="number"?l===h-1:l[this.rowKey]===e.keyValue);let n=e.checked;i!==-1&&(typeof a=="boolean"?e.checked=a:e.checked=!e.checked,n!==e.checked&&this.check(e.rowData||e,e.checked,e.rowData?e.keyValue:null,!0))}),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},clearSelection(){let t=this.theadChildren;this.theadChildren||(t=this.trChildren[0]),t.checked=!1,t.indeterminate=!1,this.trChildren.forEach(a=>{a.checked=!1}),this.backData=[],this.backIndexData=[],this.$emit("selection-change",{detail:{value:[],index:[]}})},toggleAllSelection(){let t=[],a=1,e=this.theadChildren;this.theadChildren?a=e.rowspan-1:e=this.trChildren[0],this.trChildren.forEach((h,i)=>{h.disabled||i>a-1&&t.push(i-a)}),this.toggleRowSelection(t)},check(t,a,e,h){let i=this.theadChildren;this.theadChildren||(i=this.trChildren[0]);let n=this.trChildren.findIndex((d,s)=>t===d);if(n<0&&(n=this.data.findIndex(d=>d[this.rowKey]===e)+1),this.trChildren.filter(d=>!d.disabled&&d.keyValue).length,n===0){a?this.selectionAll():this.clearSelection();return}if(a)e&&this.backData.push(t),this.backIndexData.push(n-1);else{const d=this.backData.findIndex(r=>r[this.rowKey]===e),s=this.backIndexData.findIndex(r=>r===n-1);e&&this.backData.splice(d,1),this.backIndexData.splice(s,1)}this.trChildren.find((d,s)=>s>0&&!d.checked&&!d.disabled)?(i.indeterminate=!0,i.checked=!1):(i.indeterminate=!1,i.checked=!0),this.backIndexData.length===0&&(i.indeterminate=!1),h||this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})}}};function f(t,a,e,h,i,n){return c.e({a:i.noData},i.noData?{b:c.t(e.emptyText),c:e.border?1:""}:{},{d:e.loading},e.loading?{e:e.border?1:""}:{},{f:i.minWidth+"px",g:e.stripe?1:"",h:e.border?1:"",i:i.noData?"":1})}var u=c._export_sfc(o,[["render",f],["__file","D:/Coding/Kitchen/uni_modules/uni-table/components/uni-table/uni-table.vue"]]);wx.createComponent(u);
